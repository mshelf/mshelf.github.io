webpackJsonp([0],{162:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),l=n.n(i),s=n(98),c=n.n(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={playerVars:{autoplay:1}},f=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e.handleNextClick=e.handleNextClick.bind(e),e}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.channelId&&this.setChannel(this.props.channelId)}},{key:"componentWillReceiveProps",value:function(e){e.channelId!==this.props.channelId&&this.setChannel(e.channelId)}},{key:"setChannel",value:function(e){var t=this;if(!e)return void this.setState({videoId:null});var n=this.props.playingQueue;this.props.playingQueue.setOnChangeHandler(function(){t.setState({videoId:n.getNextTrack()})}),n.loadTracks(e)}},{key:"handleNextClick",value:function(){this.props.playingQueue.loadTracks(this.props.channelId)}},{key:"getChannelNameById",value:function(e){return e.replace(/\\/g," / ")}},{key:"renderPlayer",value:function(){var e=this.state.videoId;return e?l.a.createElement("div",null,l.a.createElement("div",{className:"app-player-container"},l.a.createElement(c.a,{opts:p,className:"app-youtube-player",videoId:e,onEnd:this.handleNextClick})),l.a.createElement("div",{className:"app-player-buttons"},l.a.createElement("button",{onClick:this.handleNextClick},"Next Track >>"))):null}},{key:"render",value:function(){var e=this.props.channelId;return e?l.a.createElement("div",{className:"app-content"},l.a.createElement("h1",{className:"app-content-header"},this.getChannelNameById(e)),this.renderPlayer()):null}}]),t}(l.a.PureComponent);t.a=f,f.propTypes={channelId:i.PropTypes.string,playingQueue:i.PropTypes.object}},163:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),l=n.n(i),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleMenuItemClick=e.handleMenuItemClick.bind(e),e.state={expandedPath:{}},e}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this.setState({expandedPath:this.getExpandedPathById(this.props.channelId)})}},{key:"componentWillReceiveProps",value:function(e){if(e.channelId!==this.props.channelId){var t=this.getExpandedPathById(e.channelId);this.setState({expandedPath:t})}}},{key:"handleMenuItemClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.target.getAttribute("data-id");if("folder"===e.target.getAttribute("data-type"))if(e.target.className.includes("expanded")){var n=t.split("\\");n.pop(),this.setState({expandedPath:this.getExpandedPathByParts(n)})}else{var r=this.getExpandedPathById(t);this.setState({expandedPath:r})}else this.props.onSelectChannel(t)}},{key:"getExpandedPathById",value:function(e){if(void 0===e)return{};var t=e.split("\\");return this.getExpandedPathByParts(t)}},{key:"getExpandedPathByParts",value:function(e){for(var t="",n={},r=0;r<e.length;r++)t=this.concatParentIdAndId(t,e[r]),n[t]=!0;return n}},{key:"concatParentIdAndId",value:function(e,t){return e?e+"\\"+t:t}},{key:"renderItem",value:function(e,t,n,r,o){return l.a.createElement("li",{key:e,"data-id":e,"data-type":n,onClick:this.handleMenuItemClick,className:r?n+" expanded":n},t,o?o:null)}},{key:"renderGenresBranch",value:function(e,t){var n=[],r=this.state.expandedPath;for(var o in e){var a=e[o],i=this.concatParentIdAndId(t,a.title);if(a.children){var s=r[i]?"expanded":"",c=l.a.createElement("ul",{className:"submenu "+s},this.renderItem(i,"All "+a.title,"channel",this.props.channelId===i),this.renderGenresBranch(a.children,i));n.push(this.renderItem(i,a.title,"folder",r[i],c))}else n.push(this.renderItem(i,a.title,"channel",i===this.props.channelId))}return n}},{key:"render",value:function(){var e=this.props.genres,t=this.props.isForceShow?"app-menu force-show":"app-menu";return l.a.createElement("div",{className:t},l.a.createElement("ul",{className:"root"},this.renderGenresBranch(e,"")))}}]),t}(l.a.PureComponent);t.a=c,c.propTypes={channelId:i.PropTypes.string,onSelectChannel:i.PropTypes.func}},164:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),l=n.n(i),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"app-top-bar"},l.a.createElement("div",{className:"app-menu-toggle-button",onClick:this.props.onToggleMenu},l.a.createElement("svg",{viewBox:"0 0 32 32"},l.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))),l.a.createElement("div",{className:"app-header"},l.a.createElement("div",{className:"app-logo"}),l.a.createElement("div",{className:"app-header-text"},"Music Shelf Radio")))}}]),t}(l.a.Component);t.a=c,c.propTypes={onToggleMenu:i.PropTypes.func}},165:function(e,t,n){"use strict";function r(e,t){return e.title>t.title?1:e.title<t.title?-1:0}t.a=[{title:"Pop",keywords:[{query:["pop music","поп музыка"],yearPostfix:1990},"европа плюс музыка","русское радио музыка"]},{title:"Rock",children:[{title:"Hard Rock",keywords:{query:["Hard rock music","Glam rock music"],epochPostfix:1970}},{title:"Punk Rock",keywords:{epochPostfix:1970}},{title:"Post Rock",keywords:{query:["post rock","shoegaze music","post punk"],yearPostfix:2e3}},{title:"Alternative Rock",keywords:{epochPostfix:1990,yearPostfix:2e3}},{title:"Progressive Rock",keywords:{epochPostfix:1970}},{title:"Russian Rock",keywords:{query:["Русский рок музыка","Русский рок клипы"],epochPostfix:1980,yearPostfix:2e3}}].sort(r)},{title:"Metal",children:[{title:"Heavy Metal",keywords:["New Wave of British Heavy Metal","Heavy Metal","hard and heavy"]},{title:"Power Metal",keywords:{epochPostfix:2e3}},{title:"Thrash Metal",keywords:{epochPostfix:1980}},{title:"Black Metal",keywords:{epochPostfix:1980,yearPostfix:2e3}},{title:"Death Metal",children:[{title:"Melodic Death",keywords:{query:"Melodic death metal",yearPostfix:2e3}}].sort(r)},{title:"Metalcore",keywords:{yearPostfix:2e3}},{title:"Nu Metal",keywords:{yearPostfix:2e3,epochPostfix:1990}},{title:"Post Metal",keywords:{query:["post metal","post black metal"],yearPostfix:2005}},{title:"Folk Metal",keywords:{query:["folk metal","pagan metal","viking metal"],yearPostfix:2005}}].sort(r)},{title:"Electronic",children:[{title:"Ambient",keywords:{query:"ambient music -chillout",yearPostfix:2015}},{title:"House",children:[{title:"Deep House",keywords:{yearPostfix:2010}},{title:"Electro House",keywords:{yearPostfix:2010}}].sort(r)},{title:"Trance",children:[{title:"Progressive Trance",keywords:{yearPostfix:2005}},{title:"Uplifting Trance",keywords:{yearPostfix:2005}},{title:"Vocal Trance",keywords:{yearPostfix:2005}},{title:"Goa-Psy Trance",keywords:{yearPostfix:2e3,epochPostfix:1990}}].sort(r)},{title:"Hardstyle",children:[{title:"Hardcore",keywords:{query:["Electronic hardcore","electronic hardstyle"],keywords:{yearPostfix:2e3,epochPostfix:1990}}},{title:"Gabber",keywords:{yearPostfix:2010}}].sort(r)},{title:"Light & Relax",children:[{title:"Lounge",keywords:{yearPostfix:2010}},{title:"Chillout",keywords:{yearPostfix:2010}},{title:"Trip-Hop",keywords:{yearPostfix:2010}}].sort(r)},{title:"Drum & Bass",keywords:{query:["Drum & Bass","liquid drum and bass"],yearPostfix:2005}},{title:"Techno",keywords:{query:["Techno","Detroit techno"],yearPostfix:2005,epochPostfix:1990}}].sort(r)},{title:"Hip-Hop & Rap",keywords:{yearPostfix:2e3,epochPostfix:1990},children:[{title:"Russian Rap",keywords:{yearPostfix:2005,epochPostfix:1990}}].sort(r)},{title:"Jazz",children:[{title:"Classic Jazz"},{title:"Bebop Jazz"},{title:"Piano Jazz"},{title:"Acid Jazz"},{title:"Avantgarde Jazz"}].sort(r)},{title:"Blues",keywords:{epochPostfix:1920}},{title:"Ska"},{title:"Classical"},{title:"Instrumental",children:[{title:"Guitar",keywords:"instrumental guitar music"},{title:"Piano",keywords:"instrumental piano music"}].sort(r)}].sort(r)},166:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){e.forEach(function(e){var r=a(n,e.title);e.children?(o(e.children,t,r),t[r]=i(r,e)):t[r]=i(r,e)})}function a(e,t){return e?e+"\\"+t:t}function i(e,t){return{title:t.title,keywords:t.keywords,childrenIds:t.children?l(e,t.children):void 0}}function l(e,t){var n=[];return t.forEach(function(t){s(a(e,t.title),t,n)}),n}function s(e,t,n){n.push(e),t.children&&t.children.forEach(function(t){s(a(e,t.title),t,n)})}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t){r(this,e),this.registry={},o(t,this.registry)}return c(e,[{key:"getChannelDescriptor",value:function(e){return this.registry[e]}}]),e}();t.a=u},167:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.tracksLoader=t,this.onChangeHandler=null,this.track=null}return o(e,[{key:"setOnChangeHandler",value:function(e){this.onChangeHandler=e}},{key:"loadTracks",value:function(e){var t=this;this.tracksLoader.loadTracks(e).then(function(e){t.track=e,t.onChangeHandler&&t.onChangeHandler()})}},{key:"getNextTrack",value:function(){return this.track}}]),e}();t.a=a},168:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=e.keywords?e.keywords:e.title+" music";if("object"===(void 0===t?"undefined":p(t))&&Array.isArray(t)&&(t=s(t)),"string"==typeof t)return""+t;var n=void 0;switch(p(t.query)){case"undefined":n=e.title+" music";break;case"object":n=s(t.query);break;case"string":n=t.query}switch(i(3)%3){case 0:return n;case 1:if(t.yearPostfix){return n+" "+l(t.yearPostfix,(new Date).getFullYear()+1)}return n;case 2:if(t.epochPostfix){return n+" "+c(t.epochPostfix)}return n}}function a(e,t){if(e.items.length>0){var r=Math.floor(Math.random()*e.items.length),o=t(e.items[r]);return"youtube#video"===o.kind?o.videoId:n.i(u.b)(o.playlistId).then(function(e){return a(e,function(e){return e.snippet.resourceId})})}return null}function i(e){return Math.floor(Math.random()*e)}function l(e,t){return Math.floor(Math.random()*(t-e))+e}function s(e){return e[i(e.length)]}function c(e){var t=(new Date).getFullYear(),n=t-t%10;return e+10*i(1+Math.floor((n-e)/10))+"s"}var u=n(187),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(){function e(t){r(this,e),this.channelsRegistry=t}return f(e,[{key:"loadTracks",value:function(e){var t=this.channelsRegistry.getChannelDescriptor(e);t.childrenIds&&i(2)%2==0&&(t=this.channelsRegistry.getChannelDescriptor(s(t.childrenIds)));var r=o(t);return n.i(u.a)(r).then(function(e){return a(e,function(e){return e.id})})}}]),e}();t.a=h},169:function(e,t){},187:function(e,t,n){"use strict";function r(e){var t=s+"/search?part=id&key="+l+"&type=video,playlist&maxResults=50&q="+encodeURIComponent(e);return i.a.get(t).then(function(e){return e.data})}function o(e){var t=s+"/playlistItems?part=snippet&key="+l+"&maxResults=30&playlistId="+e+"&fields=items(snippet/resourceId)";return i.a.get(t).then(function(e){return e.data})}var a=n(97),i=n.n(a);t.a=r,t.b=o;var l="AIzaSyDpQHUScIP1XnEoY6PdqgNRNGRRN5kO5vE",s="https://www.googleapis.com/youtube/v3"},386:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){setTimeout(function(){document.getElementsByTagName("body")[0].className="",document.getElementById("app").innerHTML="",setTimeout(function(){p.a.render(c.a.createElement(f.Router,{history:f.hashHistory},c.a.createElement(f.Route,{path:"(:channelId)",component:P})),document.getElementById("app"))},500)},1e3)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(169),s=(n.n(l),n(4)),c=n.n(s),u=n(58),p=n.n(u),f=n(59),h=n(163),d=n(164),y=n(162),m=n(165),v=n(166),k=n(168),b=n(167),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();window.initApp=function(){"loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",function(){i()})};var P=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.handleToggleMenu=e.handleToggleMenu.bind(e),e.handleSelectChannel=e.handleSelectChannel.bind(e),e.state={isMenuForceShow:!1};var n=new v.a(m.a),a=new k.a(n);return e.playingQueue=new b.a(a),e}return a(t,e),g(t,[{key:"handleToggleMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({isMenuForceShow:!this.state.isMenuForceShow})}},{key:"handleSelectChannel",value:function(e){this.props.params.channelId!==e&&(this.context.router.push(e),this.setState({isMenuForceShow:!1}))}},{key:"render",value:function(){var e=this.props.params.channelId;return c.a.createElement("div",null,c.a.createElement(d.a,{onToggleMenu:this.handleToggleMenu}),c.a.createElement(h.a,{channelId:e,genres:m.a,isForceShow:this.state.isMenuForceShow,onSelectChannel:this.handleSelectChannel}),c.a.createElement(y.a,{channelId:e,playingQueue:this.playingQueue}))}}]),t}(c.a.Component);P.contextTypes={router:c.a.PropTypes.object.isRequired}}},[386]);